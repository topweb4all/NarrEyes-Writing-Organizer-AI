{% extends "layout.html" %}

{% block title %}AI Generator - NarrEyes{% endblock %}

{% block content %}
    <div class="row justify-content-center">
        <div class="col-md-10">
            <div class="card shadow">
                <div class="card-body p-4">
                    <h2 class="card-title text-center mb-4">
                        <i class="bi bi-stars"></i> AI Content Generator
                    </h2>

                    <form method="POST" action="{{ url_for('ai') }}">
                        <div class="mb-3">
                            <label for="ai_type" class="form-label">Content Type</label>
                            <select class="form-select" id="ai_type" name="ai_type" required>
                                <option value="character" {% if ai_type == 'character' %}selected{% endif %}>Character Description</option>
                                <option value="scene" {% if ai_type == 'scene' %}selected{% endif %}>Scene Description</option>
                                <option value="dialogue" {% if ai_type == 'dialogue' %}selected{% endif %}>Dialogue</option>
                                <option value="description" {% if ai_type == 'description' %}selected{% endif %}>General Description</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="prompt" class="form-label">Your Prompt</label>
                            <textarea class="form-control" id="prompt" name="prompt" rows="4" placeholder="Describe what you want to generate..." required>{{ prompt or '' }}</textarea>
                            <div class="form-text">
                                Example: "Create a mysterious detective character who works at night"
                            </div>
                        </div>

                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="bi bi-magic"></i> Generate Content
                            </button>
                        </div>
                    </form>

                    {% if result %}
                        <hr class="my-4">
                        <div class="alert alert-success">
                            <h5><i class="bi bi-check-circle"></i> Generated Content:</h5>
                            <div class="mt-3 p-3 bg-white rounded border">
                        <pre style="white-space: pre-wrap; font-family: inherit;">{{ result }}</pre>
                            </div>
                            <button class="btn btn-sm btn-outline-success mt-2" onclick="copyToClipboard()">
                                <i class="bi bi-clipboard"></i> Copy to Clipboard
                            </button>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <script>
        function copyToClipboard() {
            const text = document.querySelector('pre').textContent;
            navigator.clipboard.writeText(text).then(() => {
                alert('Copied to clipboard!');
            });
        }
    </script>
{% endblock %}
